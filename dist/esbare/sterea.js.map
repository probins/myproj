{"version":3,"file":"sterea.js","sources":["../../../proj4js/lib/common/srat.js","../../../proj4js/lib/projections/gauss.js","../../../proj4js/lib/projections/sterea.js","../../projections/sterea.js"],"sourcesContent":["export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import sterea from '../../proj4js/lib/projections/sterea.js';\nimport projections from '../../proj4js/lib/projections.js';\n\nprojections.add(sterea);\n"],"names":["esinp","exp","Math","pow","init","sphi","sin","this","lat0","cphi","cos","rc","sqrt","es","C","phic0","asin","ratexp","e","K","tan","FORTPI","srat","forward","p","lon","x","lat","y","atan","HALF_PI","inverse","num","i","abs","names","gauss","apply","sinc0","cosc0","R2","title","sinc","cosc","cosl","k","adjust_lon","long0","k0","a","x0","y0","rho","c","atan2","projections","add","sterea"],"mappings":"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"}