import{t,a as h,H as s,E as a,F as i,b as l,p as M}from"./index-4146d191.js";var o={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var s=Math.sin(this.lat0),a=Math.cos(this.lat0),i=this.e*s;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(a,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var l,M,o=t(this.e,this.lat0,s),n=this.bl/a*Math.sqrt((1-this.es)/(1-i*i));if(n*n<1&&(n=1),isNaN(this.longc)){var r=t(this.e,this.lat1,Math.sin(this.lat1)),e=t(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(o,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(o,this.bl);var b=Math.pow(r,this.bl),m=Math.pow(e,this.bl);M=.5*((l=this.el/b)-1/l);var g=(this.el*this.el-m*b)/(this.el*this.el+m*b),c=(m-b)/(m+b),p=h(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(g*Math.tan(.5*this.bl*p)/c)/this.bl,this.long0=h(this.long0);var _=h(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*_)/M),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else l=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=l*Math.pow(o,this.bl),M=.5*(l-1/l),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(M*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))},forward:function(l){var M,o,n,r=l.x,e=l.y,b=h(r-this.long0);if(Math.abs(Math.abs(e)-s)<=a)n=e>0?-1:1,o=this.al/this.bl*Math.log(Math.tan(i+n*this.gamma0*.5)),M=-1*n*s*this.al/this.bl;else{var m=t(this.e,e,Math.sin(e)),g=this.el/Math.pow(m,this.bl),c=.5*(g-1/g),p=.5*(g+1/g),_=Math.sin(this.bl*b),u=(c*Math.sin(this.gamma0)-_*Math.cos(this.gamma0))/p;o=Math.abs(Math.abs(u)-1)<=a?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-u)/(1+u))/this.bl,M=Math.abs(Math.cos(this.bl*b))<=a?this.al*this.bl*b:this.al*Math.atan2(c*Math.cos(this.gamma0)+_*Math.sin(this.gamma0),Math.cos(this.bl*b))/this.bl}return this.no_rot?(l.x=this.x0+M,l.y=this.y0+o):(M-=this.uc,l.x=this.x0+o*Math.cos(this.alpha)+M*Math.sin(this.alpha),l.y=this.y0+M*Math.cos(this.alpha)-o*Math.sin(this.alpha)),l},inverse:function(t){var i,M;this.no_rot?(M=t.y-this.y0,i=t.x-this.x0):(M=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),i=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var o=Math.exp(-1*this.bl*M/this.al),n=.5*(o-1/o),r=.5*(o+1/o),e=Math.sin(this.bl*i/this.al),b=(e*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/r,m=Math.pow(this.el/Math.sqrt((1+b)/(1-b)),1/this.bl);return Math.abs(b-1)<a?(t.x=this.long0,t.y=s):Math.abs(b+1)<a?(t.x=this.long0,t.y=-1*s):(t.y=l(this.e,m),t.x=h(this.long0-Math.atan2(n*Math.cos(this.gamma0)-e*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};M.Proj.projections.add(o);
//# sourceMappingURL=omerc.js.map
