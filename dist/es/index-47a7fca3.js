var e=484813681109536e-20,t=Math.PI/2,a=1e-10,r=.017453292519943295,n=57.29577951308232,s=Math.PI/4,i=2*Math.PI,o=3.14159265359,u={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},l={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},d=/[\s_\-\/\(\)]/g;function m(e,t){if(e[t])return e[t];for(var a,r=Object.keys(e),n=t.toLowerCase().replace(d,""),s=-1;++s<r.length;)if((a=r[s]).toLowerCase().replace(d,"")===n)return e[a]}function f(e){var t,a,n,s={},i=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var a=t.split("=");return a.push(!0),e[a[0].toLowerCase()]=a[1],e}),{}),o={proj:"projName",datum:"datumCode",rf:function(e){s.rf=parseFloat(e)},lat_0:function(e){s.lat0=e*r},lat_1:function(e){s.lat1=e*r},lat_2:function(e){s.lat2=e*r},lat_ts:function(e){s.lat_ts=e*r},lon_0:function(e){s.long0=e*r},lon_1:function(e){s.long1=e*r},lon_2:function(e){s.long2=e*r},alpha:function(e){s.alpha=parseFloat(e)*r},lonc:function(e){s.longc=e*r},x_0:function(e){s.x0=parseFloat(e)},y_0:function(e){s.y0=parseFloat(e)},k_0:function(e){s.k0=parseFloat(e)},k:function(e){s.k0=parseFloat(e)},a:function(e){s.a=parseFloat(e)},b:function(e){s.b=parseFloat(e)},r_a:function(){s.R_A=!0},zone:function(e){s.zone=parseInt(e,10)},south:function(){s.utmSouth=!0},towgs84:function(e){s.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){s.to_meter=parseFloat(e)},units:function(e){s.units=e;var t=m(l,e);t&&(s.to_meter=t.to_meter)},from_greenwich:function(e){s.from_greenwich=e*r},pm:function(e){var t=m(u,e);s.from_greenwich=(t||parseFloat(e))*r},nadgrids:function(e){"@null"===e?s.datumCode="none":s.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(s.axis=e)}};for(t in i)a=i[t],t in o?"function"==typeof(n=o[t])?n(a):s[n]=a:s[t]=a;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var c=/\s/,h=/[A-Za-z]/,p=/[A-Za-z84]/,_=/[,\]]/,g=/[\d\.E\-\+]/;function y(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function v(e,t,a){Array.isArray(t)&&(a.unshift(t),t=null);var r=t?{}:e,n=a.reduce((function(e,t){return C(t,e),e}),r);t&&(e[t]=n)}function C(e,t){if(Array.isArray(e)){var a=e.shift();if("PARAMETER"===a&&(a=e.shift()),1===e.length)return Array.isArray(e[0])?(t[a]={},void C(e[0],t[a])):void(t[a]=e[0]);if(e.length)if("TOWGS84"!==a){if("AXIS"===a)return a in t||(t[a]=[]),void t[a].push(e);var r;switch(Array.isArray(a)||(t[a]={}),a){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[a]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&C(e[2],t[a]));case"SPHEROID":case"ELLIPSOID":return t[a]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&C(e[3],t[a]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void v(t,a,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return C(e,t[a]);return v(t,a,e)}}else t[a]=e;else t[a]=!0}else t[e]=!0}y.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;c.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},y.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(_.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},y.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},y.prototype.number=function(e){if(!g.test(e)){if(_.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},y.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},y.prototype.keyword=function(e){if(p.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!_.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},y.prototype.neutral=function(e){if(h.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(g.test(e))return this.word=e,void(this.state=3);if(!_.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},y.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function b(e){return.017453292519943295*e}function N(e){var t=new y(e).output(),a=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",a]);var n={};return C(t,n),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",a=0,r=e.AXIS.length;a<r;++a){var n=e.AXIS[a][0].toLowerCase();-1!==n.indexOf("north")?t+="n":-1!==n.indexOf("south")?t+="s":-1!==n.indexOf("east")?t+="e":-1!==n.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;function i(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",b],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",b],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",b],["lat0","latitude_of_origin",b],["lat0","standard_parallel_1",b],["lat1","standard_parallel_1",b],["lat2","standard_parallel_2",b],["azimuth","Azimuth"],["alpha","azimuth",b],["srsCode","name"]].forEach((function(t){return a=e,n=(r=t)[0],s=r[1],void(!(n in a)&&s in a&&(a[n]=a[s],3===r.length&&(a[n]=r[2](a[n]))));var a,r,n,s})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=b(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(n),n}function w(e){var t=this;if(2===arguments.length){var a=arguments[1];"string"==typeof a?"+"===a.charAt(0)?w[e]=f(arguments[1]):w[e]=N(arguments[1]):w[e]=a}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?w.apply(t,e):w(e)}));if("string"==typeof e){if(e in w)return w[e]}else"EPSG"in e?w["EPSG:"+e.EPSG]=e:"ESRI"in e?w["ESRI:"+e.ESRI]=e:"IAU2000"in e?w["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e.WGS84=e["EPSG:4326"]}(w);var S=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var A=["3857","900913","3785","102113"];function M(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in w}(e))return w[e];if(function(e){return S.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=N(e);if(function(e){var t=m(e,"authority");if(t){var a=m(t,"epsg");return a&&A.indexOf(a)>-1}}(t))return w["EPSG:3857"];var a=function(e){var t=m(e,"extension");if(t)return m(t,"proj4")}(t);return a?f(a):t}return function(e){return"+"===e[0]}(e)?f(e):void 0}function x(e,t){var a,r;if(e=e||{},!t)return e;for(r in t)void 0!==(a=t[r])&&(e[r]=a);return e}function E(e){return e}var G=[{init:function(){},forward:E,inverse:E,names:["longlat","identity"]}],O={},z=[];function R(e,t){var a=z.length;return e.names?(z[a]=e,e.names.forEach((function(e){O[e.toLowerCase()]=a})),this):(console.log(t),!0)}var k={start:function(){G.forEach(R)},add:R,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==O[t]&&z[O[t]]?z[O[t]]:void 0}},I={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},P=I.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};I.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var T={};function D(t,a){if(!(this instanceof D))return new D(t);a=a||function(e){if(e)throw e};var r=M(t);if("object"==typeof r){var n=D.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var s=m(T,r.datumCode);s&&(r.datum_params=s.towgs84?s.towgs84.split(","):null,r.ellps=s.ellipse,r.datumName=s.datumName?s.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var i,o,u,l,d,f,c,h=function(e,t,a,r,n){if(!e){var s=m(I,r);s||(s=P),e=s.a,t=s.b,a=s.rf}return a&&!t&&(t=(1-1/a)*e),(0===a||Math.abs(e-t)<1e-10)&&(n=!0,t=e),{a:e,b:t,rf:a,sphere:n}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(i=h.a,o=h.b,h.rf,u=r.R_A,f=((l=i*i)-(d=o*o))/l,c=0,u?(l=(i*=1-f*(.16666666666666666+f*(.04722222222222222+.022156084656084655*f)))*i,f=0):c=Math.sqrt(f),{es:f,e:c,ep2:(l-d)/d}),_=r.datum||function(t,a,r,n,s,i){var o={};return o.datum_type=void 0===t||"none"===t?5:4,a&&(o.datum_params=a.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=1),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=2,o.datum_params[3]*=e,o.datum_params[4]*=e,o.datum_params[5]*=e,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=r,o.b=n,o.es=s,o.ep2=i,o}(r.datumCode,r.datum_params,h.a,h.b,p.es,p.ep2);x(this,r),x(this,n),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=_,this.init(),a(null,this)}else a(t)}else a(t)}function j(e){return 1===e||2===e}function F(e,a,r){return function(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}(e,a)||5===e.datum_type||5===a.datum_type?r:e.es!==a.es||e.a!==a.a||j(e.datum_type)||j(a.datum_type)?(r=function(e,a,r){var n,s,i,o,u=e.x,l=e.y,d=e.z?e.z:0;if(l<-t&&l>-1.001*t)l=-t;else if(l>t&&l<1.001*t)l=t;else{if(l<-t)return{x:-1/0,y:-1/0,z:e.z};if(l>t)return{x:1/0,y:1/0,z:e.z}}return u>Math.PI&&(u-=2*Math.PI),s=Math.sin(l),o=Math.cos(l),i=s*s,{x:((n=r/Math.sqrt(1-a*i))+d)*o*Math.cos(u),y:(n+d)*o*Math.sin(u),z:(n*(1-a)+d)*s}}(r,e.es,e.a),j(e.datum_type)&&(r=function(e,t,a){if(1===t)return{x:e.x+a[0],y:e.y+a[1],z:e.z+a[2]};if(2===t){var r=a[0],n=a[1],s=a[2],i=a[3],o=a[4],u=a[5],l=a[6];return{x:l*(e.x-u*e.y+o*e.z)+r,y:l*(u*e.x+e.y-i*e.z)+n,z:l*(-o*e.x+i*e.y+e.z)+s}}}(r,e.datum_type,e.datum_params)),j(a.datum_type)&&(r=function(e,t,a){if(1===t)return{x:e.x-a[0],y:e.y-a[1],z:e.z-a[2]};if(2===t){var r=a[0],n=a[1],s=a[2],i=a[3],o=a[4],u=a[5],l=a[6],d=(e.x-r)/l,m=(e.y-n)/l,f=(e.z-s)/l;return{x:d+u*m-o*f,y:-u*d+m+i*f,z:o*d-i*m+f}}}(r,a.datum_type,a.datum_params)),function(e,a,r,n){var s,i,o,u,l,d,m,f,c,h,p,_,g,y,v,C=e.x,b=e.y,N=e.z?e.z:0;if(s=Math.sqrt(C*C+b*b),i=Math.sqrt(C*C+b*b+N*N),s/r<1e-12){if(y=0,i/r<1e-12)return t,v=-n,{x:e.x,y:e.y,z:e.z}}else y=Math.atan2(b,C);o=N/i,f=(u=s/i)*(1-a)*(l=1/Math.sqrt(1-a*(2-a)*u*u)),c=o*l,g=0;do{g++,d=a*(m=r/Math.sqrt(1-a*c*c))/(m+(v=s*f+N*c-m*(1-a*c*c))),_=(p=o*(l=1/Math.sqrt(1-d*(2-d)*u*u)))*f-(h=u*(1-d)*l)*c,f=h,c=p}while(_*_>1e-24&&g<30);return{x:y,y:Math.atan(p/Math.abs(h)),z:v}}(r,a.es,a.a,a.b)):r}function L(e,t,a){var r,n,s,i=a.x,o=a.y,u=a.z||0,l={};for(s=0;s<3;s++)if(!t||2!==s||void 0!==a.z)switch(0===s?(r=i,n=-1!=="ew".indexOf(e.axis[s])?"x":"y"):1===s?(r=o,n=-1!=="ns".indexOf(e.axis[s])?"y":"x"):(r=u,n="z"),e.axis[s]){case"e":l[n]=r;break;case"w":l[n]=-r;break;case"n":l[n]=r;break;case"s":l[n]=-r;break;case"u":void 0!==a[n]&&(l.z=r);break;case"d":void 0!==a[n]&&(l.z=-r);break;default:return null}return l}function U(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function W(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function q(e,t,a){var s;if(Array.isArray(a)&&(a=U(a)),function(e){W(e.x),W(e.y)}(a),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(a=q(e,s=new D("WGS84"),a),e=s),"enu"!==e.axis&&(a=L(e,!1,a)),"longlat"===e.projName)a={x:a.x*r,y:a.y*r,z:a.z||0};else if(e.to_meter&&(a={x:a.x*e.to_meter,y:a.y*e.to_meter,z:a.z||0}),!(a=e.inverse(a)))return;return e.from_greenwich&&(a.x+=e.from_greenwich),a=F(e.datum,t.datum,a),t.from_greenwich&&(a={x:a.x-t.from_greenwich,y:a.y,z:a.z||0}),"longlat"===t.projName?a={x:a.x*n,y:a.y*n,z:a.z||0}:(a=t.forward(a),t.to_meter&&(a={x:a.x/t.to_meter,y:a.y/t.to_meter,z:a.z||0})),"enu"!==t.axis?L(t,!0,a):a}T.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},T.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},T.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},T.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},T.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},T.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},T.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},T.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},T.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},T.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},T.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},T.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},T.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},T.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},T.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},T.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},T.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},D.projections=k,D.projections.start();var J=D("WGS84");function H(e,t,a){var r,n,s;return Array.isArray(a)?(r=q(e,t,a)||{x:NaN,y:NaN},a.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(a.splice(3)):[r.x,r.y,a[2]].concat(a.splice(3)):[r.x,r.y].concat(a.splice(2)):[r.x,r.y]):(n=q(e,t,a),2===(s=Object.keys(a)).length||s.forEach((function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;n[r]=a[r]})),n)}function B(e){return e instanceof D?e:e.oProj?e.oProj:D(e)}function V(e,t,a){e=B(e);var r,n=!1;return void 0===t?(t=e,e=J,n=!0):(void 0!==t.x||Array.isArray(t))&&(a=t,t=e,e=J,n=!0),t=B(t),a?H(e,t,a):(r={forward:function(a){return H(e,t,a)},inverse:function(a){return H(t,e,a)}},n&&(r.oProj=t),r)}var X=65,Z=73,K=79,Q={forward:Y,inverse:function(e){var t=ae(se(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:$};function Y(e,t){return t=t||5,function(e,t){var a="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(c=e.easting,h=e.northing,p=e.zoneNumber,_=ne(p),g=Math.floor(c/1e5),y=Math.floor(h/1e5)%20,n=g,s=y,i=_,o=i-1,u="AJSAJS".charCodeAt(o),l="AFAFAF".charCodeAt(o),d=u+n-1,m=l+s,f=!1,d>90&&(d=d-90+X-1,f=!0),(d===Z||u<Z&&d>Z||(d>Z||u<Z)&&f)&&d++,(d===K||u<K&&d>K||(d>K||u<K)&&f)&&++d===Z&&d++,d>90&&(d=d-90+X-1),m>86?(m=m-86+X-1,f=!0):f=!1,(m===Z||l<Z&&m>Z||(m>Z||l<Z)&&f)&&m++,(m===K||l<K&&m>K||(m>K||l<K)&&f)&&++m===Z&&m++,m>86&&(m=m-86+X-1),String.fromCharCode(d)+String.fromCharCode(m))+a.substr(a.length-5,t)+r.substr(r.length-5,t);var n,s,i,o,u,l,d,m,f;var c,h,p,_,g,y}(function(e){var t,a,r,n,s,i,o,u=e.lat,l=e.lon,d=6378137,m=ee(u),f=ee(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60);u>=56&&u<64&&l>=3&&l<12&&(o=32);u>=72&&u<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37));i=ee(6*(o-1)-180+3),.006739496752268451,t=d/Math.sqrt(1-.00669438*Math.sin(m)*Math.sin(m)),a=Math.tan(m)*Math.tan(m),r=.006739496752268451*Math.cos(m)*Math.cos(m),n=Math.cos(m)*(f-i),s=d*(.9983242984503243*m-.002514607064228144*Math.sin(2*m)+2639046602129982e-21*Math.sin(4*m)-3.418046101696858e-9*Math.sin(6*m));var c=.9996*t*(n+(1-a+r)*n*n*n/6+(5-18*a+a*a+72*r-.39089081163157013)*n*n*n*n*n/120)+5e5,h=.9996*(s+t*Math.tan(m)*(n*n/2+(5-a+9*r+4*r*r)*n*n*n*n/24+(61-58*a+a*a+600*r-2.2240339282485886)*n*n*n*n*n*n/720));u<0&&(h+=1e7);return{northing:Math.round(h),easting:Math.round(c),zoneNumber:o,zoneLetter:re(u)}}({lat:e[1],lon:e[0]}),t)}function $(e){var t=ae(se(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function ee(e){return e*(Math.PI/180)}function te(e){return e/Math.PI*180}function ae(e){var t=e.northing,a=e.easting,r=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s,i,o,u,l,d,m,f,c=6378137,h=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=a-5e5,_=t;r<"N"&&(_-=1e7),d=6*(n-1)-180+3,f=(m=_/.9996/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*m)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*m)+151*h*h*h/96*Math.sin(6*m),s=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),i=Math.tan(f)*Math.tan(f),o=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*c/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=p/(.9996*s);var g=f-s*Math.tan(f)/u*(l*l/2-(5+3*i+10*o-4*o*o-.06065547077041606)*l*l*l*l/24+(61+90*i+298*o+45*i*i-1.6983531815716497-3*o*o)*l*l*l*l*l*l/720);g=te(g);var y,v=(l-(1+2*i+o)*l*l*l/6+(5-2*o+28*i-3*o*o+.05391597401814761+24*i*i)*l*l*l*l*l/120)/Math.cos(f);if(v=d+te(v),e.accuracy){var C=ae({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});y={top:C.lat,right:C.lon,bottom:g,left:v}}else y={lat:g,lon:v};return y}function re(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function ne(e){var t=e%6;return 0===t&&(t=6),t}function se(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,a=e.length,r=null,n="",s=0;!/[A-Z]/.test(t=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;n+=t,s++}var i=parseInt(n,10);if(0===s||s+3>a)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(s++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+e;r=e.substring(s,s+=2);for(var u=ne(i),l=function(e,t){var a="AJSAJS".charCodeAt(t-1),r=1e5,n=!1;for(;a!==e.charCodeAt(0);){if(++a===Z&&a++,a===K&&a++,a>90){if(n)throw"Bad character: "+e;a=X,n=!0}r+=1e5}return r}(r.charAt(0),u),d=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var a="AFAFAF".charCodeAt(t-1),r=0,n=!1;for(;a!==e.charCodeAt(0);){if(++a===Z&&a++,a===K&&a++,a>86){if(n)throw"Bad character: "+e;a=X,n=!0}r+=1e5}return r}(r.charAt(1),u);d<ie(o);)d+=2e6;var m=a-s;if(m%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,c,h,p=m/2,_=0,g=0;return p>0&&(f=1e5/Math.pow(10,p),c=e.substring(s,s+p),_=parseFloat(c)*f,h=e.substring(s+p),g=parseFloat(h)*f),{easting:_+l,northing:g+d,zoneLetter:o,zoneNumber:i,accuracy:f}}function ie(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function oe(e,t,a){if(!(this instanceof oe))return new oe(e,t,a);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}oe.fromMGRS=function(e){return new oe($(e))},oe.prototype.toMGRS=function(e){return Y([this.x,this.y],e)},V.defaultDatum="WGS84",V.Proj=D,V.WGS84=new V.Proj("WGS84"),V.Point=oe,V.toPoint=U,V.defs=w,V.transform=q,V.mgrs=Q,V.version="undefined";export{a as E,s as F,t as H,n as R,o as S,i as T,V as p};
//# sourceMappingURL=index-47a7fca3.js.map
